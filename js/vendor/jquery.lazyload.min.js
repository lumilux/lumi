/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2013 Mika Tuupola
 * with modifications by Hans E Hyttinen (2013)
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.8.4
 *
 */
(function(c,b,a,e){var d=c(b);c.fn.lazyload=function(f){var h=this;var j;var g={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:true,appear:null,load:null,onAppear:null};function i(){var l=this,n=c(this);if(!this.loaded){if(g.appear){var m=h.length;g.appear.call(l,m,g)}c("<img />").bind("load",function(){n.hide().attr("src",n.data(g.data_attribute))[g.effect](g.effect_speed);l.loaded=true;var o=c.grep(h,function(q){return !q.loaded});h=c(o);if(g.load){var p=h.length;g.load.call(l,p,g)}}).attr("src",n.data(g.data_attribute))}}function k(){var l=0;h.each(function(){var m=c(this);if(g.skip_invisible&&!m.is(":visible")){return}if(c.abovethetop(this,g)||c.leftofbegin(this,g)){}else{if(!c.belowthefold(this,g)&&!c.rightoffold(this,g)){m.trigger("appear");l=0}else{if(++l>g.failure_limit){return false}}}})}if(f){if(e!==f.failurelimit){f.failure_limit=f.failurelimit;delete f.failurelimit}if(e!==f.effectspeed){f.effect_speed=f.effectspeed;delete f.effectspeed}c.extend(g,f)}j=(g.container===e||g.container===b)?d:c(g.container);if(0===g.event.indexOf("scroll")){j.bind(g.event,function(l){return k()})}this.each(function(){var l=this;l.loaded=false;c(l).one("appear",function(){if(g.onAppear){g.onAppear.call(l,i)}else{i.call(l)}});if(0!==g.event.indexOf("scroll")){$self.bind(g.event,function(m){if(!l.loaded){$self.trigger("appear")}})}});d.bind("resize",function(l){k()});if((/iphone|ipod|ipad.*os 5/gi).test(navigator.appVersion)){d.bind("pageshow",function(l){if(l.originalEvent.persisted){h.each(function(){c(this).trigger("appear")})}})}c(b).load(function(){k()});return this};c.belowthefold=function(g,h){var f;if(h.container===e||h.container===b){f=d.height()+d.scrollTop()}else{f=c(h.container).offset().top+c(h.container).height()}return f<=c(g).offset().top-h.threshold};c.rightoffold=function(g,h){var f;if(h.container===e||h.container===b){f=d.width()+d.scrollLeft()}else{f=c(h.container).offset().left+c(h.container).width()}return f<=c(g).offset().left-h.threshold};c.abovethetop=function(g,h){var f;if(h.container===e||h.container===b){f=d.scrollTop()}else{f=c(h.container).offset().top}return f>=c(g).offset().top+h.threshold+c(g).height()};c.leftofbegin=function(g,h){var f;if(h.container===e||h.container===b){f=d.scrollLeft()}else{f=c(h.container).offset().left}return f>=c(g).offset().left+h.threshold+c(g).width()};c.inviewport=function(f,g){return !c.rightoffold(f,g)&&!c.leftofbegin(f,g)&&!c.belowthefold(f,g)&&!c.abovethetop(f,g)};c.extend(c.expr[":"],{"below-the-fold":function(f){return c.belowthefold(f,{threshold:0})},"above-the-top":function(f){return !c.belowthefold(f,{threshold:0})},"right-of-screen":function(f){return c.rightoffold(f,{threshold:0})},"left-of-screen":function(f){return !c.rightoffold(f,{threshold:0})},"in-viewport":function(f){return c.inviewport(f,{threshold:0})},"above-the-fold":function(f){return !c.belowthefold(f,{threshold:0})},"right-of-fold":function(f){return c.rightoffold(f,{threshold:0})},"left-of-fold":function(f){return !c.rightoffold(f,{threshold:0})}})})(jQuery,window,document);
